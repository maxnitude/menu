{"version":3,"sources":["components/app-header/shopping-cart-solid.svg","components/added-button/added-button.js","components/menu-list-item/menu-list-item.js","components/resto-service-context/resto-service-context.js","components/hoc/with-resto-service.js","actions/index.js","components/spinner/spinner.js","components/menu-list/menu-list.js","components/pages/main-page.js","components/cart-table/cart-table.js","components/cart-table/index.js","components/pages/cart-page.js","components/app-header/app-header.js","components/app/app.js","components/error/error.js","components/error-boundry/error-boundry.js","services/resto-service.js","reducers/index.js","store.js","index.js"],"names":["module","exports","__webpack_require__","p","AddedButton","_ref","isItemInCart","onAddToCard","itemsInCart","deleteFromCard","count","react_default","a","createElement","className","onClick","MenuListItem","menuItem","title","price","url","src","alt","added_button","RestoServiceContext","React","createContext","WithRestoService","Wrapped","props","resto_service_context","Consumer","RestoService","Object","assign","id","type","payload","Spinner","MenuList","_this","this","menuRequsted","getMenuItems","then","res","menuLoaded","menu","_this$props","menuItems","loading","addedToCard","spinner_spinner","map","findItem","find","item","menu_list_item_menu_list_item","key","Component","mapDispatchToProps","newMenu","connect","state","MainPage","menu_list_menu_list","CartTable","_ref2","Fragment","CartPage","components_cart_table","total","react_router_dom","to","cartIcon","App","app_header_app_header","react_router","exact","path","component","Error","ErrorBoundry","error","setState","children","_apiBase","fetch","concat","response","ok","json","getResource","initialState","reducer","arguments","length","undefined","action","objectSpread","existingItem","toConsumableArray","newItem","idx","itemIndex","findIndex","delItem","slice","idy","added","store","createStore","restoService","ReactDOM","render","es","error_boundry_ErrorBoundry","Provider","value","basename","process","app","document","getElementById"],"mappings":"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","file":"static/js/main.56611db0.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/shopping-cart-solid.701d6d1d.svg\";","import React from 'react';\r\nimport './added-buttom.scss';\r\n\r\nconst AddedButton = ({isItemInCart, onAddToCard, itemsInCart, deleteFromCard}) => {\r\n \r\n    const {count} = itemsInCart;\r\n\r\n    return (\r\n        <div className=\"added-btn\">\r\n            <button \r\n                className=\"added-btn__minus\"\r\n                onClick={() => {\r\n                    deleteFromCard()\r\n                    }\r\n                } \r\n            >-</button>\r\n            <div className=\"added-btn__title\">\r\n                <span >Added:</span>\r\n                <span >{count}</span>\r\n            </div> \r\n            <button \r\n                className=\"added-btn__plus\"\r\n                onClick={() => {\r\n                    onAddToCard();\r\n                    isItemInCart()\r\n                    }\r\n                } \r\n            >+</button>\r\n        </div>  \r\n    )\r\n\r\n}\r\n\r\nexport default AddedButton;","import React from 'react';\nimport './menu-list-item.scss';\nimport AddedButton from '../added-button/added-button';\n\nconst MenuListItem = ({isItemInCart, menuItem, onAddToCard, itemsInCart, deleteFromCard}) => {\n    const {title, price, url} = menuItem;\n    \n    return (\n            <li \n                className=\"menu__item\">\n                    <img className=\"menu__img\" src={url} alt={title}></img>\n                    <div className=\"menu__title\">{title}</div>\n                    <div className=\"menu__price-info\">\n                        <div className=\"menu__price\">Price: <span>{price}$</span></div>\n                        { itemsInCart ? \n                            <AddedButton \n                                itemsInCart={itemsInCart}\n                                isItemInCart={isItemInCart}\n                                onAddToCard={onAddToCard}\n                                deleteFromCard={deleteFromCard}\n                            /> :     \n                            <button \n                                    onClick={() => {\n                                        onAddToCard();\n                                        isItemInCart()\n                                        }\n                                    } \n                                    className=\"menu__btn\"\n                            >Add to cart</button>\n                        }\n                    </div>\n            </li>\n    );\n}\n\nexport default MenuListItem;","import React from 'react';\r\n\r\nconst RestoServiceContext = React.createContext();\r\n\r\nexport default RestoServiceContext;","import React from 'react';\nimport RestoServiceContext from '../resto-service-context/resto-service-context';\n\nconst WithRestoService = () => (Wrapped) => {\n    return (props) => {\n        return (\n            <RestoServiceContext.Consumer>\n                {\n                    (RestoService) => {\n                        return <Wrapped {...props} RestoService={RestoService}/>\n                    }\n                }\n            </RestoServiceContext.Consumer>\n        )\n    };\n};\n\nexport default WithRestoService;","const menuLoaded = (newMenu) => {\r\n    return {\r\n        type: 'MENU_LOADED',\r\n        payload: newMenu\r\n    };\r\n};\r\n\r\nconst menuRequsted = () => {\r\n    return {\r\n        type: 'MENU_REQUESTED',\r\n    };\r\n};\r\n\r\nconst addedToCard = (id, price) => {\r\n    return {\r\n        type: 'ITEM_ADD_TO_CARD',\r\n        payload: id,\r\n        price: price\r\n    };\r\n};\r\n\r\nconst deleteFromCard = (id) => {\r\n    return {\r\n        type: 'ITEM_REMOVE_FROM_CARD',\r\n        payload: id\r\n    };\r\n};\r\n\r\nconst isItemInCart = (id) => {\r\n    return {\r\n        type: 'CHECK_ITEM_IN_CART',\r\n        payload: id\r\n    };\r\n};\r\n\r\nexport {\r\n    menuLoaded,\r\n    menuRequsted,\r\n    addedToCard,\r\n    deleteFromCard,\r\n    isItemInCart\r\n};","import React from 'react';\nimport './spinner.scss';\n\nconst Spinner = () => {\n\n    return (\n        <section className='spinner'>\n            <div className=\"spinner__eclipse\"> \n                <div className=\"ldio-2pu35wpqvcc\">\n                    <div></div>\n                </div>\n            </div>\n        </section>\n    )\n}\n\nexport default Spinner;","import React from 'react';\nimport MenuListItem from '../menu-list-item/menu-list-item';\nimport {connect} from 'react-redux';\nimport WithRestoService from '../hoc/with-resto-service';\nimport {menuLoaded, menuRequsted, addedToCard, isItemInCart, deleteFromCard} from '../../actions/index';\nimport Spinner from '../spinner/spinner';\n\nimport './menu-list.scss';\n\nclass MenuList extends React.Component {\n    componentDidMount() {\n        this.props.menuRequsted();\n        const {RestoService} = this.props;\n        RestoService.getMenuItems()\n         .then(res => this.props.menuLoaded(res.menu));\n    }\n\n    \n    render() {\n        const {menuItems, loading, addedToCard, isItemInCart, itemsInCart, deleteFromCard} = this.props;\n\n        if (loading) {\n            return <Spinner/>\n        }\n\n        return (\n            <ul className=\"menu__list\">\n                {\n                    menuItems.map(menuItem => {\n                        const findItem = itemsInCart.find(item => item.id === menuItem.id) || null;\n                        return <MenuListItem \n                            key={menuItem.id} \n                            menuItem={menuItem}\n                            onAddToCard={() => addedToCard(menuItem.id, menuItem.price)}\n                            isItemInCart={() => isItemInCart(menuItem.id)}\n                            deleteFromCard={() => deleteFromCard(menuItem.id)}\n                            itemsInCart={findItem || null}\n                            />\n                    })\n                }\n            </ul>\n        )\n    }\n};\n\nconst mapStateToProps = (state) => {\n    return {\n        menuItems: state.menu,\n        loading: state.loading,\n        itemsInCart: state.itemsInCart\n    }\n}\n\nconst mapDispatchToProps = {\n    menuLoaded,\n    menuRequsted,\n    addedToCard,\n    isItemInCart,\n    deleteFromCard\n}\n\nexport default WithRestoService()(connect(mapStateToProps, mapDispatchToProps)(MenuList));","import React from 'react';\nimport MenuList from '../menu-list/menu-list';\n\nconst MainPage = () => {\n    return (\n        <MenuList/>\n    )\n}\n\nexport default MainPage;\n","import React from 'react';\nimport './cart-table.scss';\nimport {connect} from 'react-redux';\nimport {deleteFromCard} from '../../actions/index'\n\nconst CartTable = ({itemsInCart, deleteFromCard}) => {\n    return (\n        <>\n            <div className=\"cart__title\">Ваш заказ:</div>\n            <div className=\"cart__list\">\n                {\n                    itemsInCart.map(item => {\n                        const {title, price, url, id, count} = item;\n\n                        return (\n                            <div key={id} className=\"cart__item\">\n                            <img src={url} className=\"cart__item-img\" alt={title}></img>\n                            <div className=\"cart__item-title\">{title}</div>\n                            <div className=\"cart__item-title\">{count} x {price}$</div>\n                            <div className=\"cart__item-price\">{count*price}$</div>\n                            <div onClick={() => deleteFromCard(id, price, count)} className=\"cart__close\">&times;</div>\n                            </div>\n                        )\n                    })\n                }\n            </div>\n        </>\n    );\n};\n\nconst mapStateToProps = ({itemsInCart}) => {\n    return {\n        itemsInCart\n    }\n}\n\nconst mapDispatchToProps = {\n    deleteFromCard\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CartTable);","import CartTable from './cart-table';\n\nexport default CartTable;","import React from 'react';\nimport CartTable from '../cart-table';\n\nconst CartPage = () => {\n    return (\n        <div className=\"cart\"> \n            <CartTable/>\n        </div>\n    )\n}\n\nexport default CartPage;","import React from 'react';\nimport cartIcon from './shopping-cart-solid.svg';\nimport {Link} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport './app-header.scss';\n\nconst AppHeader = ({total}) => {\n    return (\n        <header className=\"header\">\n            <Link to='/' className=\"header__link\" >\n                Menu\n            </Link>\n            <Link to='/cart' className=\"header__link\" >\n                <img className=\"header__cart\" src={cartIcon} alt=\"cart\"></img>\n                Total: {total} $\n            </Link>\n        </header>\n    )\n};\n\nconst mapStateToProps = ({total}) => {\n    return {\n        total\n    }\n}\n\nexport default connect(mapStateToProps)(AppHeader);","import React from 'react';\nimport {MainPage, CartPage} from '../pages';\nimport AppHeader from '../app-header/app-header';\nimport {Route} from 'react-router-dom';\n \nclass App extends React.Component  {\n    render () {\n        return (\n                <div className=\"app\">\n                <AppHeader/>\n                <Route exact path='/' component={MainPage}  />\n                <Route path=\"/cart\" component={CartPage} />\n                </div>\n        )\n    }     \n}\n\nexport default App;","import React from 'react';\n\nconst Error = () => {\n    return <div className=\"error\">Error</div>\n}\n\nexport default Error;","import React from 'react';\nimport Error from '../error/error';\n\nexport default class ErrorBoundry extends React.Component {\n\n    state = {\n        error: false\n    }\n    componentDidCatch() {\n        this.setState({error: true})\n    }\n    render() {\n       if (this.state.error) {\n        return <Error/>;\n       }\n       \n       return this.props.children;\n    }\n}\n","export default class RestoService {\r\n    _apiBase = 'https://maxnitude.github.io';\r\n    \r\n    async getResource (url) {\r\n        const response = await fetch(`${this._apiBase}${url}`);\r\n        if (response.ok) {\r\n            return response.json();\r\n        } else {\r\n            throw new Error(`Не удалось получить данные`)\r\n        }\r\n    }\r\n\r\n    async getMenuItems () {\r\n        return await this.getResource(`/menu/db.json`);\r\n    }\r\n}\r\n","const initialState = {\r\n    menu: [],\r\n    loading: true,\r\n    itemsInCart: [],\r\n    total: 0\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'MENU_LOADED':\r\n            return {\r\n                ...state,\r\n                menu: action.payload,\r\n                loading: false\r\n            };\r\n        case 'MENU_REQUESTED':\r\n            return {\r\n                ...state,\r\n                menu: state.menu,\r\n                loading: true\r\n            };\r\n        case 'ITEM_ADD_TO_CARD':\r\n            const id = action.payload;\r\n            const price = action.price;\r\n            const item = state.menu.find(item => item.id === id);\r\n            const existingItem = state.itemsInCart.find(item => item.id === id);\r\n            if (existingItem) {\r\n                existingItem.count++;\r\n                // console.log(existingItem.count);\r\n                return {\r\n                    ...state,\r\n                    itemsInCart: [\r\n                        ...state.itemsInCart\r\n                    ],\r\n                    total: state.total + price\r\n                };\r\n            }\r\n\r\n            const newItem = {\r\n                title: item.title,\r\n                price: item.price,\r\n                url: item.url,\r\n                id: item.id,\r\n                count: 1,\r\n            }   \r\n            \r\n            return {\r\n                ...state,\r\n                itemsInCart: [\r\n                    ...state.itemsInCart,\r\n                   newItem\r\n                ],\r\n                total: state.total+price\r\n            };\r\n\r\n        case 'ITEM_REMOVE_FROM_CARD':\r\n            const idx = action.payload;\r\n            const itemIndex = state.itemsInCart.findIndex(item => item.id === idx);\r\n            const delItem = state.itemsInCart.find(item => item.id === idx); \r\n            if (delItem.count > 1) {\r\n                delItem.count--;\r\n                return {\r\n                    ...state,\r\n                    itemsInCart: [\r\n                        ...state.itemsInCart\r\n                    ],\r\n                    total: state.total - delItem.price\r\n                };\r\n            }   \r\n            return {\r\n                ...state,\r\n                itemsInCart: [\r\n                    ...state.itemsInCart.slice(0, itemIndex),\r\n                    ...state.itemsInCart.slice(itemIndex + 1)\r\n                ],\r\n                total: state.total - delItem.price\r\n            }\r\n\r\n        case 'CHECK_ITEM_IN_CART':\r\n            const idy = action.payload;\r\n            const itemInCart = state.itemsInCart.find(item => item.id === idy);\r\n            itemInCart.added = true;\r\n            // console.log(itemInCart);\r\n            // console.log(state.itemsInCart);\r\n            return {\r\n                ...state,\r\n            };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","import {createStore} from 'redux';\r\nimport reducer from './reducers';\r\n\r\nconst store = createStore(reducer);\r\n\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/app/app';\nimport {Provider} from 'react-redux';\nimport {BrowserRouter as Router} from 'react-router-dom';\nimport ErrorBoundry from './components/error-boundry/error-boundry';\nimport RestoService from './services/resto-service';\nimport RestoServiceContext from './components/resto-service-context/resto-service-context';\nimport store from './store';\n\nimport './index.scss';\n\nconst restoService = new RestoService();\n\nReactDOM.render(\n    <Provider store={store}>\n        <ErrorBoundry>\n            <RestoServiceContext.Provider value={restoService}>\n                <Router basename={process.env.PUBLIC_URL}>\n                    <App/>\n                </Router>\n            </RestoServiceContext.Provider>\n        </ErrorBoundry>\n    </Provider>\n    ,document.getElementById('root')\n);\n\n"],"sourceRoot":""}