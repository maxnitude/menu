(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,a){e.exports=a.p+"static/media/shopping-cart-solid.701d6d1d.svg"},35:function(e,t,a){e.exports=a(55)},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),i=a.n(c),u=a(7),s=a(8),o=a(12),l=a(11),m=a(13),d=r.a.createContext(),p=function(){return function(e){return function(t){return r.a.createElement(d.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,{RestoService:a}))})}}},f=a(9),b=function(e,t){return{type:"ITEM_ADD_TO_CARD",payload:e,price:t}},_=function(e){return{type:"PRODUCT_REMOVE_FROM_CARD",payload:e}},E=function(e){return{type:"CHECK_ITEM_IN_CART",payload:e}},v=(a(44),function(){return r.a.createElement("section",{className:"spinner"},r.a.createElement("div",{className:"spinner__eclipse"},r.a.createElement("div",{className:"ldio-2pu35wpqvcc"},r.a.createElement("div",null))))}),C=(a(45),a(20)),I=(a(46),{deleteFromCard:function(e){return{type:"ITEM_REMOVE_FROM_CARD",payload:e}},addedToCard:b,isItemInCart:E,changeInput:function(e,t,a){return{type:"CHANGE_INPUT",payload:e,value:a,price:t}},deleteProduct:_}),O=Object(f.b)(function(e){return{itemsInCart:e.itemsInCart}},I)(function(e){var t=e.isItemInCart,a=e.addedToCard,c=e.deleteFromCard,i=e.item,u=e.changeInput,s=(e.deleteProduct,i.count),o=i.price,l=i.id,m=Object(n.useState)(!0),d=Object(C.a)(m,2),p=d[0],f=d[1],b=Object(n.useState)(!0),_=Object(C.a)(b,2),E=_[0],v=_[1],I=Object(n.useState)(!1),O=Object(C.a)(I,2),h=O[0],j=O[1];Object(n.useEffect)(function(){0===s?f(!1):49===s?v(!1):s<49&&s>0&&(v(!0),f(!0))},[s]);var N=p?"added-btn__minus":"added-btn__minus added-btn__inactive",g=E?"added-btn__plus":"added-btn__plus added-btn__inactive",y=h?"added-btn__alert-message":"added-btn__alert-message__inactive";return r.a.createElement("div",{className:"added-btn"},r.a.createElement("button",{className:N,disabled:!p,onClick:function(){p&&c(l)}},"-"),r.a.createElement("div",{className:"added-btn__title"},r.a.createElement("input",{className:"added-btn__input",type:"text",value:s,onChange:function(){},onBlur:function(e){""===e.target.value&&(u(l,o,1),f(!0)),j(!1)},onInput:function(e){var t=e.target.value,a=Number(e.target.value);if(isNaN(a)||""===t){if(""===t)f(!1),u(l,o,t);else if(isNaN(a))if(null===t.match(/\d+/))u(l,o,1);else{var n=Number(t.match(/\d+/)[0]);u(l,o,n)}}else 0===a?u(l,o,1):t>49?(j(!0),setTimeout(function(){j(!1)},3e3),u(l,o,49)):u(l,o,a)}})),r.a.createElement("button",{className:g,disabled:!E,onClick:function(){t(l),a(l,o)}},"+"),r.a.createElement("span",{className:y},"No more than 49"))}),h=function(e){var t=e.isItemInCart,a=e.menuItem,n=e.onAddToCard,c=e.itemInCart,i=a.title,u=a.price,s=a.url;return r.a.createElement("li",{className:"menu__item"},r.a.createElement("img",{className:"menu__img",src:s,alt:i}),r.a.createElement("div",{className:"menu__title"},i),r.a.createElement("div",{className:"menu__price-info"},r.a.createElement("div",{className:"menu__price"},"Price: ",r.a.createElement("span",null,u,"$")),c?r.a.createElement(O,{item:c}):r.a.createElement("button",{onClick:function(){n(),t()},className:"menu__btn"},"Add to cart")))},j=(a(47),function(e){function t(){return Object(u.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.menuItems,a=e.addedToCard,n=e.isItemInCart,c=e.itemsInCart;return r.a.createElement("ul",{className:"menu__list"},t.map(function(e){var t=c.find(function(t){return t.id===e.id})||null;return r.a.createElement(h,{key:e.id,menuItem:e,onAddToCard:function(){return a(e.id,e.price)},isItemInCart:function(){return n(e.id)},itemInCart:t})}))}}]),t}(r.a.Component)),N=(a(48),function(e){function t(){return Object(u.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.menuRequested(),this.props.RestoService.getMenuItems().then(function(t){return e.props.menuLoaded(t.menu,null)})}},{key:"render",value:function(){var e=this.props,t=e.categories,a=e.menuItems,n=e.loading,c=e.addedToCard,i=e.isItemInCart,u=e.itemsInCart,s=e.changeTab,o=e.activeTab;return n?r.a.createElement(v,null):r.a.createElement("div",{className:"menu"},r.a.createElement("ul",{className:"menu__tabs"},t.map(function(e,t){return r.a.createElement("li",{className:o===e?"menu__tabs-item active":"menu__tabs-item",key:t,onClick:function(){return s(e)}},e)})),r.a.createElement(j,{menuItems:a,addedToCard:c,isItemInCart:i,itemsInCart:u}))}}]),t}(r.a.Component)),g={menuLoaded:function(e,t){return{type:"MENU_LOADED",payload:e,tab:t}},menuRequested:function(){return{type:"MENU_REQUESTED"}},addedToCard:b,isItemInCart:E,changeTab:function(e){return{type:"CHANGE_TAB",tab:e}}},y=p()(Object(f.b)(function(e){return{menuItems:e.visibleMenu,loading:e.loading,itemsInCart:e.itemsInCart,categories:e.categories,activeTab:e.activeTab}},g)(N)),T=function(){return r.a.createElement(y,null)},M=(a(49),{deleteProduct:_}),R=Object(f.b)(function(e){return{itemsInCart:e.itemsInCart,total:e.total}},M)(function(e){var t=e.itemsInCart,a=e.total,n=e.deleteProduct;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cart__title"},a>0?"Your order:":"Cart is empty"),r.a.createElement("div",{className:"cart__list"},t.map(function(e){var t=e.title,a=e.price,c=e.url,i=e.id,u=e.count;return r.a.createElement("div",{key:i,className:"cart__item"},r.a.createElement("div",{className:"cart__item-img"},r.a.createElement("img",{src:c,className:"cart__item-img__source",alt:t})),r.a.createElement("div",{className:"cart__item-description"},r.a.createElement("div",{className:"cart__item-title"},t),r.a.createElement("div",{className:"cart__item-price"},a,"$/count"),r.a.createElement(O,{item:e}),r.a.createElement("div",{className:"cart__item-price__total"},u*a,"$"),r.a.createElement("div",{onClick:function(){return n(i)},className:"cart__item-delete"})))})))}),k=function(){return r.a.createElement("div",{className:"cart"},r.a.createElement(R,null))},A=a(33),D=a.n(A),w=a(16),x=(a(50),Object(f.b)(function(e){return{total:e.total}})(function(e){var t=e.total;return r.a.createElement("header",{className:"header"},r.a.createElement(w.b,{to:"/",className:"header__link"},"Menu"),r.a.createElement(w.b,{to:"/cart",className:"header__link"},r.a.createElement("img",{className:"header__cart",src:D.a,alt:"cart"}),"Total: ",t," $"))})),P=a(1),U=function(e){function t(){return Object(u.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(x,null),r.a.createElement(P.a,{exact:!0,path:"/",component:T}),r.a.createElement(P.a,{path:"/cart",component:k}))}}]),t}(r.a.Component),S=function(){return r.a.createElement("div",{className:"error"},"Error")},F=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={error:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidCatch",value:function(){this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?r.a.createElement(S,null):this.props.children}}]),t}(r.a.Component),B=a(17),H=a.n(B),G=a(28),L=function(){function e(){Object(u.a)(this,e),this._apiBase="https://maxnitude.github.io"}return Object(s.a)(e,[{key:"getResource",value:function(){var e=Object(G.a)(H.a.mark(function e(t){var a;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._apiBase).concat(t));case 2:if(!(a=e.sent).ok){e.next=7;break}return e.abrupt("return",a.json());case 7:throw new Error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435");case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getMenuItems",value:function(){var e=Object(G.a)(H.a.mark(function e(){return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getResource("/menu/db.json");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),V=a(19),$=a(6),q=a(5),z={allMenu:[],visibleMenu:[],loading:!0,itemsInCart:[],total:0,categories:[],activeTab:"Pizza"},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MENU_REQUESTED":return Object(q.a)({},e,{loading:!0});case"MENU_LOADED":var a=t.payload,n=t.tab;null===n&&(n=e.activeTab);var r=[];return a.forEach(function(t){-1===e.categories.indexOf(t.category)&&e.categories.push(t.category)}),a.forEach(function(e){e.category===n&&r.push(e)}),Object(q.a)({},e,{allMenu:t.payload,visibleMenu:r,loading:!1,categories:e.categories,activeTab:n});case"CHANGE_TAB":var c=t.tab,i=[];return e.allMenu.forEach(function(e){e.category===c&&i.push(e)}),Object(q.a)({},e,{visibleMenu:[].concat(i),activeTab:c});case"ITEM_ADD_TO_CARD":var u=t.payload,s=t.price,o=e.visibleMenu.find(function(e){return e.id===u}),l=e.itemsInCart.find(function(e){return e.id===u});if(l)return l.count++,Object(q.a)({},e,{itemsInCart:Object($.a)(e.itemsInCart),total:e.total+s});var m={title:o.title,price:o.price,url:o.url,id:o.id,count:1};return Object(q.a)({},e,{itemsInCart:[].concat(Object($.a)(e.itemsInCart),[m]),total:e.total+s});case"ITEM_REMOVE_FROM_CARD":var d=t.payload,p=e.itemsInCart.findIndex(function(e){return e.id===d}),f=e.itemsInCart.find(function(e){return e.id===d});return f.count>1?(f.count--,Object(q.a)({},e,{itemsInCart:Object($.a)(e.itemsInCart),total:e.total-f.price})):0===f.count?Object(q.a)({},e,{itemsInCart:[].concat(Object($.a)(e.itemsInCart.slice(0,p)),Object($.a)(e.itemsInCart.slice(p+1)))}):Object(q.a)({},e,{itemsInCart:[].concat(Object($.a)(e.itemsInCart.slice(0,p)),Object($.a)(e.itemsInCart.slice(p+1))),total:e.total-f.price});case"PRODUCT_REMOVE_FROM_CARD":var b=t.payload,_=e.itemsInCart.findIndex(function(e){return e.id===b}),E=e.itemsInCart.find(function(e){return e.id===b});return Object(q.a)({},e,{itemsInCart:[].concat(Object($.a)(e.itemsInCart.slice(0,_)),Object($.a)(e.itemsInCart.slice(_+1))),total:e.total-E.price*E.count});case"CHECK_ITEM_IN_CART":var v=t.payload;return e.itemsInCart.find(function(e){return e.id===v}).added=!0,Object(q.a)({},e);case"CHANGE_INPUT":var C=t.payload,I=t.value,O=t.price,h=e.itemsInCart.find(function(e){return e.id===C}),j=h.count;return h.count=I,Object(q.a)({},e,{itemsInCart:Object($.a)(e.itemsInCart),total:e.total+O*I-O*j});default:return e}},K=Object(V.b)(J),Q=(a(54),new L);i.a.render(r.a.createElement(f.a,{store:K},r.a.createElement(F,null,r.a.createElement(d.Provider,{value:Q},r.a.createElement(w.a,{basename:"/menu"},r.a.createElement(U,null))))),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.04797571.chunk.js.map