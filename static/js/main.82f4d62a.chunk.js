(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,a){e.exports=a.p+"static/media/shopping-cart-solid.701d6d1d.svg"},34:function(e,t,a){e.exports=a(54)},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),i=a.n(c),u=a(7),o=a(8),s=a(12),l=a(11),m=a(13),d=r.a.createContext(),p=function(){return function(e){return function(t){return r.a.createElement(d.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,{RestoService:a}))})}}},f=a(9),b=function(e,t){return{type:"ITEM_ADD_TO_CARD",payload:e,price:t}},E=function(e){return{type:"PRODUCT_REMOVE_FROM_CARD",payload:e}},_=function(e){return{type:"CHECK_ITEM_IN_CART",payload:e}},C=(a(43),function(){return r.a.createElement("section",{className:"spinner"},r.a.createElement("div",{className:"spinner__eclipse"},r.a.createElement("div",{className:"ldio-2pu35wpqvcc"},r.a.createElement("div",null))))}),v=(a(44),a(45),{deleteFromCard:function(e){return{type:"ITEM_REMOVE_FROM_CARD",payload:e}},addedToCard:b,isItemInCart:_,changeInput:function(e,t,a){return{type:"CHANGE_INPUT",payload:e,value:a,price:t}},deleteProduct:E}),I=Object(f.b)(function(e){return{itemsInCart:e.itemsInCart}},v)(function(e){var t=e.isItemInCart,a=e.addedToCard,n=e.deleteFromCard,c=e.item,i=e.changeInput,u=e.deleteProduct,o=c.count,s=c.price,l=c.id;return r.a.createElement("div",{className:"added-btn"},r.a.createElement("button",{className:"added-btn__minus",onClick:function(){n(l)}},"-"),r.a.createElement("div",{className:"added-btn__title"},r.a.createElement("input",{className:"added-btn__input",type:"text",value:o,onChange:function(){},onInput:function(e){var t=e.target.value,a=Number(t);a||0===a?a<0?i(l,s,1):a>49?i(l,s,49):0===a?u(l):i(l,s,a):i(l,s,1)}})),r.a.createElement("button",{className:"added-btn__plus",onClick:function(){t(l),a(l,s)}},"+"))}),O=function(e){var t=e.isItemInCart,a=e.menuItem,n=e.onAddToCard,c=e.itemInCart,i=a.title,u=a.price,o=a.url;return r.a.createElement("li",{className:"menu__item"},r.a.createElement("img",{className:"menu__img",src:o,alt:i}),r.a.createElement("div",{className:"menu__title"},i),r.a.createElement("div",{className:"menu__price-info"},r.a.createElement("div",{className:"menu__price"},"Price: ",r.a.createElement("span",null,u,"$")),c?r.a.createElement(I,{item:c}):r.a.createElement("button",{onClick:function(){n(),t()},className:"menu__btn"},"Add to cart")))},h=(a(46),function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.menuItems,a=e.addedToCard,n=e.isItemInCart,c=e.itemsInCart;return r.a.createElement("ul",{className:"menu__list"},t.map(function(e){var t=c.find(function(t){return t.id===e.id})||null;return r.a.createElement(O,{key:e.id,menuItem:e,onAddToCard:function(){return a(e.id,e.price)},isItemInCart:function(){return n(e.id)},itemInCart:t||null})}))}}]),t}(r.a.Component)),j=(a(47),function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.menuRequested(),this.props.RestoService.getMenuItems().then(function(t){return e.props.menuLoaded(t.menu,null)})}},{key:"render",value:function(){var e=this.props,t=e.categories,a=e.menuItems,n=e.loading,c=e.addedToCard,i=e.isItemInCart,u=e.itemsInCart,o=e.changeTab,s=e.activeTab;return n?r.a.createElement(C,null):r.a.createElement("div",{className:"menu"},r.a.createElement("ul",{className:"menu__tabs"},t.map(function(e){return r.a.createElement("li",{className:s===e?"menu__tabs-item active":"menu__tabs-item",key:e[1],onClick:function(){return o(e)}},e)})),r.a.createElement(h,{menuItems:a,addedToCard:c,isItemInCart:i,itemsInCart:u}))}}]),t}(r.a.Component)),N={menuLoaded:function(e,t){return{type:"MENU_LOADED",payload:e,tab:t}},menuRequested:function(){return{type:"MENU_REQUESTED"}},addedToCard:b,isItemInCart:_,changeTab:function(e){return{type:"CHANGE_TAB",tab:e}}},y=p()(Object(f.b)(function(e){return{menuItems:e.visibleMenu,loading:e.loading,itemsInCart:e.itemsInCart,categories:e.categories,activeTab:e.activeTab}},N)(j)),g=function(){return r.a.createElement(y,null)},T=(a(48),{deleteProduct:E}),M=Object(f.b)(function(e){return{itemsInCart:e.itemsInCart,total:e.total}},T)(function(e){var t=e.itemsInCart,a=e.total,n=e.deleteProduct;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cart__title"},a>0?"Your order:":"Cart is empty"),r.a.createElement("div",{className:"cart__list"},t.map(function(e){var t=e.title,a=e.price,c=e.url,i=e.id,u=e.count;return r.a.createElement("div",{key:i,className:"cart__item"},r.a.createElement("div",{className:"cart__item-img"},r.a.createElement("img",{src:c,className:"cart__item-img__source",alt:t})),r.a.createElement("div",{className:"cart__item-description"},r.a.createElement("div",{className:"cart__item-title"},t),r.a.createElement("div",{className:"cart__item-price"},a,"$/count"),r.a.createElement(I,{item:e}),r.a.createElement("div",{className:"cart__item-price__total"},u*a,"$"),r.a.createElement("div",{onClick:function(){return n(i)},className:"cart__item-delete"})))})))}),R=function(){return r.a.createElement("div",{className:"cart"},r.a.createElement(M,null))},k=a(32),A=a.n(k),D=a(16),w=(a(49),Object(f.b)(function(e){return{total:e.total}})(function(e){var t=e.total;return r.a.createElement("header",{className:"header"},r.a.createElement(D.b,{to:"/",className:"header__link"},"Menu"),r.a.createElement(D.b,{to:"/cart",className:"header__link"},r.a.createElement("img",{className:"header__cart",src:A.a,alt:"cart"}),"Total: ",t," $"))})),x=a(1),P=function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(w,null),r.a.createElement(x.a,{exact:!0,path:"/",component:g}),r.a.createElement(x.a,{path:"/cart",component:R}))}}]),t}(r.a.Component),U=function(){return r.a.createElement("div",{className:"error"},"Error")},F=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={error:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidCatch",value:function(){this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?r.a.createElement(U,null):this.props.children}}]),t}(r.a.Component),H=a(17),B=a.n(H),S=a(27),G=function(){function e(){Object(u.a)(this,e),this._apiBase="https://maxnitude.github.io"}return Object(o.a)(e,[{key:"getResource",value:function(){var e=Object(S.a)(B.a.mark(function e(t){var a;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._apiBase).concat(t));case 2:if(!(a=e.sent).ok){e.next=7;break}return e.abrupt("return",a.json());case 7:throw new Error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435");case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getMenuItems",value:function(){var e=Object(S.a)(B.a.mark(function e(){return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getResource("/menu/db.json");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),L=a(19),V=a(6),$=a(5),q={allMenu:[],visibleMenu:[],loading:!0,itemsInCart:[],total:0,categories:[],activeTab:"Pizza"},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MENU_REQUESTED":return Object($.a)({},e,{loading:!0});case"MENU_LOADED":var a=t.payload,n=t.tab;null===n&&(n=e.activeTab);var r=[];return a.forEach(function(t){-1===e.categories.indexOf(t.category)&&e.categories.push(t.category)}),a.forEach(function(e){e.category===n&&r.push(e)}),Object($.a)({},e,{allMenu:t.payload,visibleMenu:r,loading:!1,categories:e.categories,activeTab:n});case"CHANGE_TAB":var c=t.tab,i=[];return e.allMenu.forEach(function(e){e.category===c&&i.push(e)}),Object($.a)({},e,{visibleMenu:[].concat(i),activeTab:c});case"ITEM_ADD_TO_CARD":var u=t.payload,o=t.price,s=e.visibleMenu.find(function(e){return e.id===u}),l=e.itemsInCart.find(function(e){return e.id===u});if(l)return l.count++,Object($.a)({},e,{itemsInCart:Object(V.a)(e.itemsInCart),total:e.total+o});var m={title:s.title,price:s.price,url:s.url,id:s.id,count:1};return Object($.a)({},e,{itemsInCart:[].concat(Object(V.a)(e.itemsInCart),[m]),total:e.total+o});case"ITEM_REMOVE_FROM_CARD":var d=t.payload,p=e.itemsInCart.findIndex(function(e){return e.id===d}),f=e.itemsInCart.find(function(e){return e.id===d});return f.count>1?(f.count--,Object($.a)({},e,{itemsInCart:Object(V.a)(e.itemsInCart),total:e.total-f.price})):0===f.count?Object($.a)({},e,{itemsInCart:[].concat(Object(V.a)(e.itemsInCart.slice(0,p)),Object(V.a)(e.itemsInCart.slice(p+1)))}):Object($.a)({},e,{itemsInCart:[].concat(Object(V.a)(e.itemsInCart.slice(0,p)),Object(V.a)(e.itemsInCart.slice(p+1))),total:e.total-f.price});case"PRODUCT_REMOVE_FROM_CARD":var b=t.payload,E=e.itemsInCart.findIndex(function(e){return e.id===b}),_=e.itemsInCart.find(function(e){return e.id===b});return Object($.a)({},e,{itemsInCart:[].concat(Object(V.a)(e.itemsInCart.slice(0,E)),Object(V.a)(e.itemsInCart.slice(E+1))),total:e.total-_.price*_.count});case"CHECK_ITEM_IN_CART":var C=t.payload;return e.itemsInCart.find(function(e){return e.id===C}).added=!0,Object($.a)({},e);case"CHANGE_INPUT":var v=t.payload,I=t.value,O=t.price,h=e.itemsInCart.find(function(e){return e.id===v}),j=h.count;return h.count=I,Object($.a)({},e,{itemsInCart:Object(V.a)(e.itemsInCart),total:e.total+O*I-O*j});default:return e}},J=Object(L.b)(z),K=(a(53),new G);i.a.render(r.a.createElement(f.a,{store:J},r.a.createElement(F,null,r.a.createElement(d.Provider,{value:K},r.a.createElement(D.a,{basename:"/menu"},r.a.createElement(P,null))))),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.82f4d62a.chunk.js.map